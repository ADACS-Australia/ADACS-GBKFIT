{% extends 'base/base-two-columns.html' %}

{% block info-bar %}
{#    <div class="page-header">Infobar</div>#}
    {% if request.session.draft_job %}<p>Job: {{ request.session.draft_job }}</p>{% endif %}
    {{ request.session.draft_job.id }}
{#    {% if request.session.dataset %} <p>Dataset: {{ request.session.dataset }}</p>{% endif %}#}
{#    {% if request.session.data_model %} <p>Data model: {{ request.session.data_model }}</p>{% endif %}#}
{#    {% if request.session.psf %} <p>PSF: {{ request.session.psf }}</p>{% endif %}#}
{#    {% if request.session.lsf %} <p>LSF: {{ request.session.lsf }}</p>{% endif %}#}
{#    {% if request.session.galaxy_model %} <p>Galaxy model: {{ request.session.galaxy_model }}</p>{% endif %}#}
{#    {% if request.session.fitter %} <p>Fitter: {{ request.session.fitter }}</p>{% endif %}#}
{#    {% if request.session.params %} <p>Params: {{ request.session.params }}</p>{% endif %}#}
{% endblock info-bar %}

{% block page_header %}
    New Job
{% endblock page_header %}

{% block content %}
    <ul class="nav nav-tabs">
        <li id="li_start" {% if active_tab == 'start' %} class="active"{% endif %}><a data-toggle="tab" href="#start">Start</a></li>
        <li id="li_data-set" {% if active_tab == 'data-set' %} class="active"{% endif %}><a data-toggle="tab" href="#data-set">Dataset Upload</a></li>
        <li id="li_data-model" {% if active_tab == 'data-model' %} class="active"{% endif %}><a data-toggle="tab" href="#data-model">Data Model</a></li>
        <li id="li_psf" {% if active_tab == 'psf' %} class="active"{% endif %}><a data-toggle="tab" href="#psf">PSF</a></li>
        <li id="li_lsf" {% if active_tab == 'lsf' %} class="active"{% endif %}><a data-toggle="tab" href="#lsf">LSF</a></li>
        <li id="li_galaxy-model" {% if active_tab == 'galaxy-model' %} class="active"{% endif %}><a data-toggle="tab" href="#galaxy-model">Galaxy Model</a></li>
        <li id="li_fitter" {% if active_tab == 'fitter' %} class="active"{% endif %}><a data-toggle="tab" href="#fitter">Fitter</a></li>
        <li id="li_params" {% if active_tab == 'params' %} class="active"{% endif %}><a data-toggle="tab" href="#params">Parameters</a></li>
        <li id="li_launch" {% if active_tab == 'launch' %} class="active"{% endif %}><a data-toggle="tab" href="#launch">Launch</a></li>
    </ul>

    <div class="tab-content" id="job-tabs">

        <!-- START -->
        <div id="start" class="tab-pane fade{% if active_tab == 'start' %} in active{% endif %}">
            {% include 'job/snippets-edit/1_job_start_form.html' %}
        </div>

        <!-- Data Set -->
        <div id="data-set" class="tab-pane fade{% if active_tab == 'data-set' %} in active{% endif %}">
            {% include 'job/snippets-edit/2_dataset_form.html' %}
        </div>

        <!-- DModel -->
        <div id="data-model" class="tab-pane fade{% if active_tab == 'data-model' %} in active{% endif %}">
            {% include 'job/snippets-edit/3_data_model_form.html' %}
        </div>

        <!-- PSF -->
        <div id="psf" class="tab-pane fade{% if active_tab == 'psf' %} in active{% endif %}">
            {% include 'job/snippets-edit/4_psf_form.html' %}
        </div>

        <!-- LSF -->
        <div id="lsf" class="tab-pane fade{% if active_tab == 'lsf' %} in active{% endif %}">
            {% include 'job/snippets-edit/5_lsf_form.html' %}
        </div>

        <!-- GModel -->
        <div id="galaxy-model" class="tab-pane fade{% if active_tab == 'galaxy-model' %} in active{% endif %}">
            {% include 'job/snippets-edit/6_galaxy_model_form.html' %}
        </div>

        <!-- Fitter -->
        <div id="fitter" class="tab-pane fade{% if active_tab == 'fitter' %} in active{% endif %}">
            {% include 'job/snippets-edit/7_fitter_form.html' %}
        </div>

        <!-- Params -->
        <div id="params" class="tab-pane fade{% if active_tab == 'params' %} in active{% endif %}">
            {% include 'job/snippets-edit/8_params_form.html' %}
        </div>

        <!-- Launch -->
        <div id="launch" class="tab-pane fade{% if active_tab == 'launch' %} in active{% endif %}">
            <form action="{% url 'job_launch' %}" method="post" enctype="multipart/form-data">
                {% csrf_token %}
                <input class="btn btn-primary" type="submit" value="Launch job" />
            </form>
        </div>
    </div>
{% endblock content %}